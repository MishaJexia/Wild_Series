{% extends 'base.html.twig' %}

{% block title %}{{ 'page.serieAdmin'|trans }}{% endblock %}

{% block body %}
    <h1>{{ 'page.serieAdminTitle'|trans }}</h1>

    <table class="table">
        <thead>
            <tr>
                <th>Id</th>
                <th>{{ 'word.poster'|trans }}</th>
                <th>{{ 'word.title'|trans }}</th>
                <th>{{ 'word.summary'|trans }}</th>
                <th>{{ 'word.actor'|trans }}</th>
                <th>{{ 'word.actions'|trans }}</th>
            </tr>
        </thead>
        <tbody>
        {% for program in programs %}
            <tr>
                <td>{{ program.id }}</td>
                <td><img src="{{ program.poster is not empty ? vich_uploader_asset (program, 'posterFile', 'App\\Entity\\Program') : asset('build/img/default_poster.jpeg')}}" class="img-fluid"></td>
                <td>{{ program.title }}</td>
                <td>{{ program.summary }}</td>
                <td>
                    {% for actor in program.actors %}
                        {{ actor.name }},
                    {% else %}
                        {{ 'page.serieAdminMessageListActor'|trans }}
                    {% endfor %}
                </td>
                <td>
                    <a href="{{ path('program_show', {'slug': program.slug}) }}">{{ 'list.show'|trans }}</a>
                    {% if is_granted('ROLE_ADMIN') %}
                        <a href="{{ path('program_edit', {'slug': program.slug}) }}">{{ 'list.edit'|trans }}</a>
                    {%endif%}
                    <i id="watchlist-{{ program.id }}"
                       class="{{ app.user.isInWatchlist(program) ? 'fas' : 'far' }} fa-heart watchlist"
                       style="color: blue" data-href="{{ path('program_watchlist', {'id': program.id}) }}">
                    </i>
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="5">{{ 'page.serieAdminMessageListSerie'|trans }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <a href="{{ path('program_new') }}">{{ 'page.serieAdminCreateButton'|trans }}</a>
    {% block javascripts %}
        {{ encore_entry_script_tags('watchlist') }}
        {{ encore_entry_script_tags('app') }}
    {% endblock %}
{% endblock %}
